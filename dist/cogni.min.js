"use strict";
/**
 * Cogni: A TypeScript library designed for managing computed values and their dependencies.
 * It provides a flexible way to handle dynamic computations and caching mechanisms,
 * making it ideal for applications with complex data relationships.
 *
 * @copyright 2023 Claus Nuoskanen
 * @author Claus Nuoskanen
 */Object.defineProperty(exports,"__esModule",{value:true});class Cogni{fnMap=new Map;define(key,fn,dependencies){if(this.fnMap.has(key)){throw new Error(`"${key}" is already defined!`)}dependencies?.forEach((dependency=>{if(!this.fnMap.has(dependency))throw new Error(`Dependency "${dependency}" has not been defined yet!`)}));this.fnMap.set(key,dependencies?this.wrapWithDependencies(fn,dependencies):fn);return this}get(key,param){const fn=this.fnMap.get(key);if(!fn)throw new Error(`ComputeFunction "${key}" is not defined!`);param.parent=param.parent??{};if(param.parent[key])return param.parent[key];param.parent[key]=fn(param);return param.parent[key]}wrapWithDependencies(fn,dependencies){return param=>fn({...param,parent:this.getParentValues(dependencies,param)})}getParentValues(dependencies,param){return dependencies.reduce(((acc,name)=>{acc[name]=this.get(name,param);return acc}),{})}}exports.default=Cogni;